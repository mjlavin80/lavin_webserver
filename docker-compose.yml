version: '2'
services:
  proxy:
    build: ./proxy
    container_name: proxy
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - /root/apps/proxy/nginx.conf:/etc/nginx/conf.d/matthew-lavin.conf

    links:
      - flask_base
      - humanitiesdata
      - matthew-lavin
      - digiped_fall_2016
      - acdm_spring_2017
      - nt_spring_2017
      - neo_web_app
      - nyt_web_app
      - compvolution
      - faculty_activity
      - mtb_fall_2017
      - cdm_spring_2018
      - mtb_spring_2018

  flask_base:
    build: ./flaskbase
    container_name: flask_empty
    image: lavinflaskbase

  faculty_activity:
    build: ./faculty-activity
    container_name: faculty_activity
    links:
      - flask_base

  compvolution:
    build: ./compvolution
    container_name: compvolution
    links:
      - flask_base

  matthew-lavin:
    build: ./matthew-lavin
    container_name: matthew-lavin

  humanitiesdata:
    build: ./humanitiesdata
    container_name: humanitiesdata
    links:
      - flask_base

  neo_web_app:
    build: ./neo_web_app
    container_name: neo_web_app
    links:
      - flask_base

  nyt_web_app:
    build: ./nyt_web_app
    container_name: nyt_web_app
    links:
      - flask_base

  digiped_fall_2016:
    build: ./courses/digiped_fall_2016
    container_name: digiped_fall_2016
    links:
      - flask_base

  acdm_spring_2017:
    build: ./courses/acdm_spring_2017
    container_name: acdm_spring_2017
    links:
      - flask_base

  nt_spring_2017:
    build: ./courses/nt_spring_2017
    container_name: nt_spring_2017
    links:
      - flask_base

  mtb_fall_2017:
    build: ./courses/mtb_fall_2017
    container_name: mtb_fall_2017
    links:
      - flask_base

  cdm_spring_2018:
    build: ./courses/cdm_spring_2018
    container_name: cdm_spring_2018
    links:
      - flask_base

  mtb_spring_2018:
    build: ./courses/mtb_spring_2018
    container_name: mtb_spring_2018
    links:
      - flask_base
