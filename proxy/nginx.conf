server {
	listen 80 default_server;
	listen [::]:80 default_server;
	server_name _;
	return 301 https://$host$request_uri;
}

server {
    listen 443 ssl;
    server_name bookhistorydata.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://humanitiesdata.com/;
            }
    }

server {
    listen 443 ssl;
    server_name humanitiesanalytics.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://humanities_analytics/;
            }
    }

server {
    listen 443 ssl;
    server_name neo.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        rewrite ^/(.*)$ https://matthew-lavin.com/ permanent;
            }
    }

server {
    listen 443 ssl;
    server_name nyt-web-app.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://nyt_web_app/;
            }
    }

server {
    listen 443 ssl;
    server_name aps-web-app.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://aps_web_app/;
            }
    }

server {
    listen 443 ssl;
    server_name audiobooks-web-app.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://audiobooks_web_app/;
            }
    }

server {
    listen 443 ssl;
    server_name portfolio.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        rewrite ^/(.*)$ https://matthew-lavin.com/ permanent;
            }
    location /cv {
        rewrite ^/cv$ https://matthew-lavin.com/cv permanent;
            }
    }

server {
    listen 443 ssl;
    server_name acdm-spring-2017.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        rewrite ^/(.*)$ https://matthew-lavin.com/teaching permanent;
            }
    }

server {
    listen 443 ssl;
    server_name nt-spring-2017.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        rewrite ^/(.*)$ https://matthew-lavin.com/teaching permanent;
            }
    }


server {
    listen 443 ssl;
    server_name mtb-fall-2018.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        rewrite ^/(.*)$ https://matthew-lavin.com/teaching permanent;
            }
    }

server {
    listen 443 ssl;
    server_name cdm-spring-2018.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        rewrite ^/(.*)$ https://matthew-lavin.com/teaching permanent;
            }
    }

server {
    listen 443 ssl;
    server_name dh-fall-2018.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        rewrite ^/(.*)$ https://matthew-lavin.com/teaching permanent;
            }
    }

server {
    listen 443 ssl;
    server_name mtb-fall-2017.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        rewrite ^/(.*)$ https://matthew-lavin.com/teaching permanent;
            }
    }

server {
    listen 443 ssl;
    server_name mtb-spring-2018.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        rewrite ^/(.*)$ https://matthew-lavin.com/teaching permanent;
            }
    }

server {
    listen 443 ssl;
    server_name pdc-spring-2019.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        rewrite ^/(.*)$ https://matthew-lavin.com/teaching permanent;
            }
    }

server {
    listen 443 ssl;
    server_name cdm-spring-2020.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        rewrite ^/(.*)$ https://matthew-lavin.com/teaching permanent;
            }
    }

server {
        listen 443 ssl;
        server_name matthew-lavin.com;
        ssl_certificate           /etc/nginx/fullchain.pem;
        ssl_certificate_key       /etc/nginx/privkey.pem;
        location / {
                proxy_pass http://matthew-lavin/;
        }
}

server {
    listen 443 ssl;
    server_name humanitiesdata.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://humanitiesdata/;
            }
    }

server {
    listen 443 ssl;
    server_name rebeccamlee.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://rebeccamlee/;
            }
    }
