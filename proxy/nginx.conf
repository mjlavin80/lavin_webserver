server {
	listen 80 default_server;
	listen [::]:80 default_server;
	server_name _;
	return 301 https://$host$request_uri;
}

server {
    listen 443 ssl;
    server_name bookhistorydata.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://humanitiesdata.com/;
            }
    }

server {
    listen 443 ssl;
    server_name humanitiesanalytics.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://humanities_analytics/;
            }
    }

server {
    listen 443 ssl;
    server_name neo.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://neo_web_app/;
            }
    }

server {
    listen 443 ssl;
    server_name nyt-web-app.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://nyt_web_app/;
            }
    }

server {
    listen 443 ssl;
    server_name aps-web-app.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://aps_web_app/;
            }
    }

server {
    listen 443 ssl;
    server_name audiobooks-web-app.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://audiobooks_web_app/;
            }
    }

server {
    listen 443 ssl;
    server_name portfolio.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        rewrite ^/(.*)$ https://matthew-lavin.com/ permanent;
            }
    location /cv {
        rewrite ^/cv$ https://matthew-lavin.com/cv permanent;
            }
    }

server {
    listen 443 ssl;
    server_name acdm-spring-2017.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://acdm_spring_2017/;
            }
    }

server {
    listen 443 ssl;
    server_name nt-spring-2017.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://nt_spring_2017/;
            }
    }


server {
    listen 443 ssl;
    server_name mtb-fall-2018.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://mtb_fall_2018/;
            }
    }

server {
    listen 443 ssl;
    server_name cdm-spring-2018.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://cdm_spring_2018/;
            }
    }

server {
    listen 443 ssl;
    server_name dh-fall-2018.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://dh_fall_2018/;
            }
    }

server {
    listen 443 ssl;
    server_name mtb-fall-2017.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://mtb_fall_2017/;
            }
    }

server {
    listen 443 ssl;
    server_name mtb-spring-2018.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://mtb_spring_2018/;
            }
    }

server {
    listen 443 ssl;
    server_name pdc-spring-2019.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://pdc_spring_2019/;
            }
    }

server {
    listen 443 ssl;
    server_name cdm-spring-2020.matthew-lavin.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://cdm_spring_2020/;
            }
    }

server {
        listen 443 ssl;
        server_name matthew-lavin.com;
        ssl_certificate           /etc/nginx/fullchain.pem;
        ssl_certificate_key       /etc/nginx/privkey.pem;
        location / {
                proxy_pass http://matthew-lavin/;
                rewrite ^/teaching/nt-spring-2017/(.*)$ https://nt_spring_2017.matthew-lavin.com/$1 redirect;
                rewrite ^/teaching/acdm-spring-2017/(.*)$ https://acdm_spring_2017.matthew-lavin.com/$1 redirect;
                }
	location /teaching/digital-pedagogy-fall-2016/ {
                proxy_pass http://digiped_fall_2016/;
        }
}



server {
    listen 443 ssl;
    server_name humanitiesdata.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://humanitiesdata/;
            }
    }

server {
    listen 443 ssl;
    server_name rebeccamlee.com;
    ssl_certificate           /etc/nginx/fullchain.pem;
    ssl_certificate_key       /etc/nginx/privkey.pem;
    location / {
        proxy_pass http://rebeccamlee/;
            }
    }

server {
        listen  80;
	listen [::]:80;
        server_name secretpittsburgh.org www.secretpittsburgh.org;
        return 301 https://secretpittsburgh.pitt.edu$request_uri;
        }
